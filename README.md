# Portfolio Manager App

λ‹¤μ¤‘ μμ‚° ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬ μ„λΉ„μ¤ - μ‹¤μ‹κ°„ ν‰κ°€, ν¬νΈν΄λ¦¬μ¤ λΉ„κµ, λ°±ν…μ¤ν…, λ¦¬λ°Έλ°μ‹± μ‹λ®¬λ μ΄μ…μ„ μ§€μ›ν•©λ‹λ‹¤.

## π“‹ λ©μ°¨

- [μ£Όμ” κΈ°λ¥](#-μ£Όμ”-κΈ°λ¥)
- [κΈ°μ  μ¤νƒ](#-κΈ°μ -μ¤νƒ)
- [μ‹μ¤ν… μ•„ν‚¤ν…μ²](#-μ‹μ¤ν…-μ•„ν‚¤ν…μ²)
- [μ‹μ‘ν•κΈ°](#-μ‹μ‘ν•κΈ°)
- [ν”„λ΅μ νΈ κµ¬μ΅°](#-ν”„λ΅μ νΈ-κµ¬μ΅°)
- [API λ¬Έμ„](#-api-λ¬Έμ„)
- [κ°λ° κ°€μ΄λ“](#-κ°λ°-κ°€μ΄λ“)

## π€ μ£Όμ” κΈ°λ¥

### ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬
- **λ‹¤μ¤‘ ν¬νΈν΄λ¦¬μ¤ μ§€μ›**: μ£Όμ‹, ETF, μ±„κ¶, μ›μμ¬ λ“± λ‹¤μ–‘ν• μμ‚° ν΄λμ¤ κ΄€λ¦¬
- **μ‹¤μ‹κ°„ ν‰κ°€**: μ‹¤μ‹κ°„ μ‹μ„Έ κΈ°λ° ν¬νΈν΄λ¦¬μ¤ ν‰κ°€ λ° ν™μ¨ λ³€ν™
- **κ±°λ λ‚΄μ—­ κ΄€λ¦¬**: λ³µμ‹λ¶€κΈ° μ¤νƒ€μΌμ κ±°λ μ›μ¥ μ‹μ¤ν…

### λ¶„μ„ λ° λΉ„κµ
- **μ„±κ³Ό λΉ„κµ**: μ—¬λ¬ ν¬νΈν΄λ¦¬μ¤μ μ„±κ³Όλ¥Ό λ²¤μΉλ§ν¬μ™€ λΉ„κµ
- **λ¦¬μ¤ν¬ λ¶„μ„**: λ³€λ™μ„±, MDD, Sharpe Ratio λ“± λ¦¬μ¤ν¬ μ§€ν‘ μ κ³µ
- **μμµλ¥  κ³„μ‚°**: TWR(μ‹κ°„κ°€μ¤‘μμµλ¥ ), MWR(κΈμ•΅κ°€μ¤‘μμµλ¥ ) μ§€μ›

### λ°±ν…μ¤ν…
- **μ „λµ μ‹λ®¬λ μ΄μ…**: κ³Όκ±° λ°μ΄ν„°λ¥Ό ν™μ©ν• ν¬μ μ „λµ λ°±ν…μ¤ν…
- **μ£ΌκΈ°μ  λ¦¬λ°Έλ°μ‹±**: μ •μ  λ°°λ¶„ λ° μ£ΌκΈ°μ  λ¦¬λ°Έλ°μ‹± μ „λµ μ‹λ®¬λ μ΄μ…
- **λΉ„λ™κΈ° μ²λ¦¬**: RabbitMQ κΈ°λ° λ€μ©λ‰ λ°±ν…μ¤νΈ λΉ„λ™κΈ° μ²λ¦¬

### λ¦¬λ°Έλ°μ‹±
- **λ©ν‘ λΉ„μ¤‘ μ„¤μ •**: μμ‚°λ³„ λ©ν‘ λΉ„μ¤‘ μ„¤μ • λ° κ΄€λ¦¬
- **λ¦¬λ°Έλ°μ‹± μ μ•**: ν„μ¬ ν¬νΈν΄λ¦¬μ¤μ™€ λ©ν‘ λΉ„μ¤‘ κ°„ μ°¨μ΄ λ¶„μ„
- **κ±°λ μ‹λ®¬λ μ΄μ…**: λ¦¬λ°Έλ°μ‹±μ— ν•„μ”ν• κ±°λ λ‚΄μ—­ μ‹λ®¬λ μ΄μ…

## π›  κΈ°μ  μ¤νƒ

### Backend
- **Java 21** (LTS)
- **Spring Boot 3.3+**
  - Spring Security (JWT μΈμ¦)
  - Spring Data JPA + Hibernate (ORM)
  - jOOQ (μ§‘κ³„/λ¶„μ„ μΏΌλ¦¬)
- **PostgreSQL 16+** (Flyway λ§μ΄κ·Έλ μ΄μ…)
- **Redis 7** (μ‹¤μ‹κ°„ μ‹μ„Έ/ν™μ¨ μΊμ‹)
- **RabbitMQ** (λ°±ν…μ¤νΈ λΉ„λ™κΈ° μ‘μ—… ν)

### Frontend
- **Vue 3** + **TypeScript**
- **Vite** (λΉλ“ λ„κµ¬)
- **Pinia** (μƒνƒ κ΄€λ¦¬)
- **ECharts** (κΈμµ μ°¨νΈ)
- **Axios** (HTTP ν΄λΌμ΄μ–ΈνΈ)

### Infrastructure
- **Docker** + **Docker Compose**
- **Gradle** (λ°±μ—”λ“ λΉλ“)
- **NPM** (ν”„λ΅ νΈμ—”λ“ ν¨ν‚¤μ§€ κ΄€λ¦¬)

## π— μ‹μ¤ν… μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   Vue.js SPA    β”‚  (ν¬νΈν΄λ¦¬μ¤ λ€μ‹λ³΄λ“, μ°¨νΈ, λ°±ν…μ¤ν… UI)
β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”
         β”‚ REST API
β”β”€β”€β”€β”€β”€β”€β”€β”€β–Όβ”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ Spring Boot API β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ β€Ά Portfolio     β”‚  ν¬νΈν΄λ¦¬μ¤ λ„λ©”μΈ
β”‚ β€Ά Ledger        β”‚  κ±°λ μ›μ¥ μ‹μ¤ν…
β”‚ β€Ά Valuation     β”‚  ν‰κ°€ μ—”μ§„
β”‚ β€Ά Analytics     β”‚  μ„±κ³Ό λ¶„μ„
β”‚ β€Ά Backtest      β”‚  λ°±ν…μ¤ν… μ—”μ§„
β”‚ β€Ά Pricing       β”‚  μ‹μ„Έ/ν™μ¨ ν΄λΌμ΄μ–ΈνΈ
β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”
         β”‚
    β”β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
    β”‚          β”‚          β”‚           β”‚
β”β”€β”€β”€β–Όβ”€β”€β”€β”  β”β”€β”€β–Όβ”€β”€β”   β”β”€β”€β”€β–Όβ”€β”€β”€β”€β”  β”β”€β”€β–Όβ”€β”€β”€β”€β”€β”€β”
β”‚PostgreSQLβ”‚ β”‚Redisβ”‚   β”‚RabbitMQβ”‚  β”‚External β”‚
β”‚         β”‚  β”‚     β”‚   β”‚        β”‚  β”‚ APIs    β”‚
β”‚ κ±°λμ›μ¥β”‚  β”‚μΊμ‹ β”‚   β”‚μ‘μ—… ν β”‚  β”‚(μ‹μ„Έ)   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”   β””β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### λ„λ©”μΈ λ¨λΈ μ›μΉ™

- **κ±°λ μ›μ¥μ΄ λ‹¨μΌ μ§„μ‹¤ κ³µκΈ‰μ›**: ν¬μ§€μ…κ³Ό ν‰κ°€μ•΅μ€ κ±°λ λ‚΄μ—­μΌλ΅λ¶€ν„° λ„μ¶
- **λ³µμ‹λ¶€κΈ° μ¤νƒ€μΌ**: κ±°λλ” μ—¬λ¬ Leg(ASSET/CASH/FEE/TAX)λ΅ κµ¬μ„±
- **μ‹μ  κΈ°λ° κ°€κ²©**: μ‹μ„Έμ™€ ν™μ¨μ€ μ‹κ°„λ³„ λ°μ΄ν„°λ΅ κ΄€λ¦¬
- **λ‹¤μ¤‘ ν†µν™” μ§€μ›**: ν¬νΈν΄λ¦¬μ¤λ³„ κΈ°μ¤€ ν†µν™” μ„¤μ • λ° ν™μ¨ λ³€ν™

### μ£Όμ” μ—”ν‹°ν‹°

- **Portfolio**: ν¬νΈν΄λ¦¬μ¤ (κΈ°μ¤€ν†µν™”, νƒ€μ…: REAL/STRATEGY/BACKTEST)
- **Instrument**: ν¬μ μƒν’ (ν‹°μ»¤, μμ‚°κµ°, ν†µν™”, κ±°λμ†)
- **Transaction + TransactionLeg**: κ±°λ λ° κ±°λ λ‚΄μ—­ (λ³µμ‹λ¶€κΈ°)
- **PriceBar / FXRate**: μ‹κ³„μ—΄ κ°€κ²© λ° ν™μ¨ λ°μ΄ν„°

## π€ μ‹μ‘ν•κΈ°

### μ‚¬μ „ μ”κµ¬μ‚¬ν•­

- **Java 21** μ΄μƒ
- **Node.js 18** μ΄μƒ
- **Docker** λ° **Docker Compose**
- **Git**

### μ„¤μΉ λ° μ‹¤ν–‰

#### 1. μ €μ¥μ† ν΄λ΅ 

```bash
git clone https://github.com/Chenjae-kr/Portfolio-app.git
cd Portfolio-app
```

#### 2. μΈν”„λΌ μ„λΉ„μ¤ μ‹¤ν–‰ (Docker)

```bash
# PostgreSQL, Redis, RabbitMQ μ‹μ‘
docker-compose up -d

# μ„λΉ„μ¤ μƒνƒ ν™•μΈ
docker-compose ps

# μ„λΉ„μ¤ μ¤‘μ§€
docker-compose down
```

#### 3. λ°±μ—”λ“ μ‹¤ν–‰

```bash
cd backend

# λΉλ“
./gradlew build

# μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰
./gradlew bootRun

# ν…μ¤νΈ μ‹¤ν–‰
./gradlew test
```

λ°±μ—”λ“ μ„λ²„: http://localhost:8080/api
Swagger UI: http://localhost:8080/api/swagger-ui.html

### μ™Έλ¶€ μ‹μ„Έ API μ—°λ™ (Alpha Vantage / KRX)

λ°±μ—”λ“λ” κΈ°λ³Έμ μΌλ΅ Mock μ‹μ„Έλ¥Ό μ‚¬μ©ν•λ©°, μ•„λ ν™κ²½λ³€μλ¥Ό μ„¤μ •ν•λ©΄ μ™Έλ¶€ API μ—°λ™μ„ ν™μ„±ν™”ν•  μ μμµλ‹λ‹¤.

```bash
export EXTERNAL_PRICING_ENABLED=true
export ALPHA_VANTAGE_API_KEY=your_api_key
# μ„ νƒ: μ»¤μ¤ν…€ μ—”λ“ν¬μΈνΈ
# export ALPHA_VANTAGE_BASE_URL=https://www.alphavantage.co
# export KRX_BASE_URL=http://data.krx.co.kr
```

- ν•΄μ™Έ/ν™μ¨: Alpha Vantage
- κµ­λ‚΄(ν•κµ­ μΆ…λ©): KRX μ •λ³΄λ°μ΄ν„°μ‹μ¤ν…
- μ™Έλ¶€ API μ‹¤ν¨ μ‹ Mock κ°€κ²©μΌλ΅ μλ™ ν΄λ°±


#### 4. ν”„λ΅ νΈμ—”λ“ μ‹¤ν–‰

```bash
cd frontend

# μμ΅΄μ„± μ„¤μΉ
npm install

# κ°λ° μ„λ²„ μ‹¤ν–‰
npm run dev

# ν”„λ΅λ•μ… λΉλ“
npm run build

# νƒ€μ… μ²΄ν¬
npm run type-check
```

ν”„λ΅ νΈμ—”λ“ μ„λ²„: http://localhost:5173

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

### λ°±μ—”λ“ ν¨ν‚¤μ§€ κµ¬μ΅°

```
backend/src/main/java/com/portfolio/
β”β”€β”€ api/              # Controllers, DTOs, OpenAPI λ¬Έμ„
β”β”€β”€ auth/             # μΈμ¦/μΈκ°€, JWT, Security μ„¤μ •
β”β”€β”€ portfolio/        # ν¬νΈν΄λ¦¬μ¤, λ©ν‘ λΉ„μ¤‘, μ μ•½ μ΅°κ±΄
β”β”€β”€ ledger/           # κ±°λ μ›μ¥, Legs, μ „ν‘ κ·μΉ™
β”β”€β”€ pricing/          # μ‹μ„Έ/ν™μ¨ ν΄λΌμ΄μ–ΈνΈ, μΊμ‹
β”β”€β”€ valuation/        # ν‰κ°€ μ—”μ§„, μ¤λƒ…μƒ·
β”β”€β”€ analytics/        # μ„±κ³Ό λ¶„μ„, λ¦¬μ¤ν¬, λΉ„κµ
β”β”€β”€ backtest/         # λ°±ν…μ¤νΈ μ„¤μ •, μ‹¤ν–‰, μ›μ»¤
β””β”€β”€ infra/            # Redis, MQ, DB, Observability
```

### ν”„λ΅ νΈμ—”λ“ λ””λ ‰ν† λ¦¬ κµ¬μ΅°

```
frontend/src/
β”β”€β”€ api/              # API ν΄λΌμ΄μ–ΈνΈ λ° μ—”λ“ν¬μΈνΈ λ¨λ“
β”β”€β”€ components/       # μ¬μ‚¬μ© κ°€λ¥ν• Vue μ»΄ν¬λ„νΈ
β”‚   β”β”€β”€ layout/      # λ μ΄μ•„μ›ƒ μ»΄ν¬λ„νΈ (Header, Sidebar)
β”‚   β”β”€β”€ portfolio/   # ν¬νΈν΄λ¦¬μ¤ κ΄€λ ¨ μ»΄ν¬λ„νΈ
β”‚   β””β”€β”€ chart/       # μ°¨νΈ μ»΄ν¬λ„νΈ
β”β”€β”€ composables/      # Vue Composables (κ³µμ  λ΅μ§)
β”β”€β”€ router/           # Vue Router μ„¤μ •
β”β”€β”€ stores/           # Pinia μ¤ν† μ–΄ (μƒνƒ κ΄€λ¦¬)
β”β”€β”€ types/            # TypeScript νƒ€μ… μ •μ
β”β”€β”€ utils/            # μ ν‹Έλ¦¬ν‹° ν•¨μ
β””β”€β”€ views/            # νμ΄μ§€ μ»΄ν¬λ„νΈ
    β”β”€β”€ dashboard/   # λ€μ‹λ³΄λ“
    β”β”€β”€ portfolio/   # ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬
    β”β”€β”€ compare/     # ν¬νΈν΄λ¦¬μ¤ λΉ„κµ
    β””β”€β”€ backtest/    # λ°±ν…μ¤ν…
```

## π“ API λ¬Έμ„

### Base URL

```
http://localhost:8080/api/v1
```

### μ£Όμ” μ—”λ“ν¬μΈνΈ

#### ν¬νΈν΄λ¦¬μ¤

```
GET    /portfolios              # ν¬νΈν΄λ¦¬μ¤ λ©λ΅ μ΅°ν
POST   /portfolios              # ν¬νΈν΄λ¦¬μ¤ μƒμ„±
GET    /portfolios/{id}         # ν¬νΈν΄λ¦¬μ¤ μƒμ„Έ μ΅°ν
PATCH  /portfolios/{id}         # ν¬νΈν΄λ¦¬μ¤ μμ •
PUT    /portfolios/{id}/targets # λ©ν‘ λΉ„μ¤‘ μ„¤μ •
```

#### κ±°λ

```
GET    /portfolios/{id}/transactions  # κ±°λ λ‚΄μ—­ μ΅°ν
POST   /portfolios/{id}/transactions  # κ±°λ λ“±λ΅
POST   /transactions/{id}/void        # κ±°λ μ·¨μ†
```

#### ν‰κ°€

```
GET    /portfolios/{id}/valuation?mode=REALTIME|EOD  # ν¬νΈν΄λ¦¬μ¤ ν‰κ°€
GET    /portfolios/{id}/performance                   # μ„±κ³Ό λ¶„μ„
```

#### λΉ„κµ λ° λ°±ν…μ¤ν…

```
POST   /compare/performance     # ν¬νΈν΄λ¦¬μ¤ μ„±κ³Ό λΉ„κµ
POST   /backtests/runs          # λ°±ν…μ¤νΈ μ‹¤ν–‰
GET    /backtests/runs/{id}/results  # λ°±ν…μ¤νΈ κ²°κ³Ό μ΅°ν
```

### κ±°λ λ‚΄μ—­ κ²€μ¦ κ·μΉ™

- Legλ“¤μ ν•©κ³„λ” 0μ΄μ–΄μ•Ό ν•¨ (ν†µν™”λ³„ λλ” κΈ°μ¤€ν†µν™” ν™μ‚° κΈ°μ¤€)
- BUY/SELL κ±°λλ” μ •ν™•ν ν•λ‚μ ASSET legλ¥Ό ν¬ν•¨
- μμλ£μ™€ μ„ΈκΈμ€ λ³„λ„μ legλ΅ μ²λ¦¬

### λ©ν‘ λΉ„μ¤‘ κ²€μ¦ κ·μΉ™

- μ „μ²΄ λΉ„μ¤‘μ ν•©μ€ 1.0 (μ •κ·ν™” μµμ… μ κ³µ)
- ν„κΈ λ©ν‘: `instrument_id=null` + `currency!=null`

## π”§ κ°λ° κ°€μ΄λ“

### Redis μΊμ‹ ν‚¤ κµ¬μ΅°

```
tick:{instrument_id}              TTL: 60-180μ΄
fx:{base}:{quote}                 TTL: 300μ΄
val:{portfolio_id}:realtime       TTL: 10-30μ΄
val:{portfolio_id}:eod:{date}     TTL: 5λ¶„
```

### ν‰κ°€ κ³„μ‚° λ°©μ‹

```
MV_i = qty_i Γ— last_price_i
MV_i_base = MV_i Γ— FX(μƒν’ν†µν™” β†’ κΈ°μ¤€ν†µν™”)
Total = Ξ£(MV_i_base) + Cash_base
```

### μμµλ¥  κ³„μ‚°

- **TWR (Time-Weighted Return)**: μ „λµ μ„±κ³Ό λΉ„κµμ— μ‚¬μ© (κΈ°λ³Έ)
- **MWR (Money-Weighted Return / IRR)**: μ‹¤μ  ν¬μ κ²½ν— λ°μ

### λ¦¬μ¤ν¬ μ§€ν‘

- **λ³€λ™μ„±** (Volatility): μ—°μ¨ν™”λ ν‘μ¤€νΈμ°¨
- **MDD** (Maximum Drawdown): μµλ€ λ‚™ν­
- **Sharpe Ratio**: μ„ν— λ€λΉ„ μ΄κ³Ό μμµλ¥ 
- **Sortino Ratio**: ν•λ°© λ¦¬μ¤ν¬ λ€λΉ„ μ΄κ³Ό μμµλ¥ 
- **Beta**: μ‹μ¥ λ€λΉ„ λ―Όκ°λ„
- **Tracking Error**: λ²¤μΉλ§ν¬ λ€λΉ„ μ¶”μ  μ¤μ°¨

### ν…μ¤νΈ μ‹¤ν–‰

```bash
# λ°±μ—”λ“ μ „μ²΄ ν…μ¤νΈ
cd backend
./gradlew test

# νΉμ • ν…μ¤νΈ μ‹¤ν–‰
./gradlew test --tests "com.portfolio.SomeTest"

# ν”„λ΅ νΈμ—”λ“ ν…μ¤νΈ (μ¶”κ°€ μμ •)
cd frontend
npm run test
```

## π—Ί MVP κ°λ° μ°μ„ μμ„

1. β… κ±°λ μ›μ¥ + ν‰κ°€ κ³„μ‚°
2. β… ν¬νΈν΄λ¦¬μ¤ UI
3. β… λΉ„κµ μ°¨νΈ
4. β… κΈ°λ³Έ λ°±ν…μ¤ν… (μ •μ  λ°°λ¶„ + μ£ΌκΈ°μ  λ¦¬λ°Έλ°μ‹±)
5. β… λ¦¬λ°Έλ°μ‹± λ„κµ¬
6. β³ μ•λ¦Ό/μΈμ‚¬μ΄νΈ

## π“ λΌμ΄μ„Όμ¤

μ΄ ν”„λ΅μ νΈλ” κ°μΈ ν¬νΈν΄λ¦¬μ¤ ν”„λ΅μ νΈμ…λ‹λ‹¤.

## π‘¤ μ‘μ„±μ

**Chenjae**
- GitHub: [@Chenjae-kr](https://github.com/Chenjae-kr)

---

**Portfolio Manager App** - μ¤λ§νΈν• μμ‚° κ΄€λ¦¬λ¥Ό μ„ν• μ¬μΈμ› μ†”λ£¨μ…
